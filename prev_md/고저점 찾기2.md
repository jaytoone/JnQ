### SYSTEM

---

> **각 data 는 하나의 자료니까 input_data_length 기준으로 crop 된 rescaling 이 필요하다.**

* 저점(더 이상 떨어지지 않는) 예측 : 가장 잘 예측하는 CROP 은 ?
* 저점 상승 확인 (COMPLTED)
* 고점(더 이상 오르지 않는) 예측 : 가장 잘 예측하는 CROP 은 ?



결국, 저점을 잘 예측하면 고점도 잘 예측할 것이고,

**그렇다면 저점을 가장 잘 에측하는 방법을 모색하면 되는데, **

1. IDL 를 변동해가면서 가장 좋은 IDL 를 찾는 방법

   > 단, IDL 이 너무 커져버리면 후보코인들을 버리게 된다.

2.  저점에는 CROP DATA, 고점에는 NONE CROP DATA



###  CROP_SIZE = IDL

---

| MODEL_NUM  | DESCRIPTION                                                  | RESULT                                                       |
| ---------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 50_48      | 후 데이터만을 이용한 고저점 라벨링, class_weight 적용        |                                                              |
| 100_49     | idl 증가                                                     | idl 50 보다 고점을 저점이라고 하는 오류가 적다.              |
| 50_50      | Y_label >> 전 후 데이터를 이용한 고저점 라벨링               | 정확도가 매우 낮아진다.. 데이터 특성이 없어지는 건가..? >> **데이터가 이상함** |
| 100_51     | ohlc + MA20, VOLUME, MACD, OBV, CMO, RSI \| 모델별로 pred 결과를 비교할 수 있게끔 | ohlc, cmo 가 잘 나오는 듯                                    |
| 100_52     | MA20 가 고저가 결과값                                        | 후행지표의 단점이 들어난다. (반응이 느림)                    |
| 100_53     | MA20 BEFORE AFTER                                            | ``                                                           |
| 500_55     | 정확도가 나오지 않는 문제..점을 위해 idl 500..               | idl 500 은 너무 길다.. : 한 파장을 담을 수 있을 만한 사이즈를 찾아야함. |
| 54_23_ohlc | 54_23 class_weight 추가 : 데이터셋은 none_crop, 예측값은 crop | 나쁘지 않은데..? : 비교 결과 = ~~**dataset 은 none_crop 이 좋고 pred 는 crop (실시간 스케일이 변하니까)**~~ |
| 40_56      |                                                              | 낮은 위치에서 고점예측이 안되는 점 : dataset 도 결국 실시간 crop 해야한다. |
| 30_57      |                                                              | <u>**idl 과 check_span 이 같은게 좋은거같다.**</u> 차트가 깔끔함  **하향 추세는 들어가지 않는게 좋다, 나오기도 힘들고** |
| 50_58      | 50_48 의 class_weight 를 임의로 조정한다.                    | * 0.9 = 저점 고점이 잘 나타나지 않는다..                     |
| 30_59      | class_weight 조정                                            | * 0.97 = **안하는게 나은거 같다. 고저점 span 이 첨예할줄 알았는데 loss 값이 달라져서인지 그렇지도 않다.** |
| 100_60     |                                                              | argmax 했을때 고저점 범위가 매우 넓다..                      |
| 20_61      | idl=crop_size=check_span 이 가장 좋은건지 확인하기 위함임    | 다 같은게 좋다기 보다는 idl=crop_size로 적용했을때, crop_size 가 차트에 주는 영향이 크다. 한 굴곡을 담을 수도 있고 아니고, 좀 더 세밀하게 예측하기는 하나 그 범위가 적다. (빨리 저점이라 판단해버림) |
| 50_62      | 급상승 못찾으면 접어야 할듯.. 데이터가 중요하다. 명확한 특징을 가지고 구별되어야 한다. 같은 사진을 놓고 다르게 라벨하는건 정확도를 떨어뜨린다.. Y_LABELING은 현재 종가가 MA 선을 뚫을지 예측한다. | 하...                                                        |
| 30_63      | Y_LABELING은 이전 종가가 이미 MA 선을 뚫은 상태에서 진행된다. **MA와 PRICE 는 SCALING 을 같이 해준다**. CLASS_WEIGHT 을 사용해도 MAX_VALUE 사용이 유효함 |                                                              |
| 30_64      | 캔들차트 / 진입과 이탈에 대한 그림만 모아둔다. / 예측할때 불러와서 학습하고, softmax로 일치율을 조사한다. | 왜 생각한 모양으로 차트가 찍히지 않는건지..                  |
| _65        | 낮은 가격에 사서 높은 가격에 파는 **로직이 필요하다.**       | cmo -80 에서 80 까지 기다리는데 추세선이 꺽이면 나온다.      |
|            |                                                              |                                                              |

> **기존거 잘만 만들면 될거 같은데..? 손절은 어차피 MA60 선 밑으로 내려가면 팔면되는거고 상승한 상태에서는 이득보구 아니면 안들어가면 되는거니까**
>
> DATASET 이나 모델, 조금더 수정해서 보완하면 되지 않을까, 학습이 진행이 많이 될 수록 정확도가 올라가는 거 같다.





### REFERENCE

---

* CLASS_WEIGHT : https://3months.tistory.com/414
* SKLEARN COMPUTE_CLASS_WEIGHT : https://androidkt.com/set-class-weight-for-imbalance-dataset-in-keras/
* 스케일이 다른 차트 겹쳐 그리기 : https://matplotlib.org/gallery/api/two_scales.html